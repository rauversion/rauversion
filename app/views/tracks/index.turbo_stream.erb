<%= turbo_stream.update "tracks_filter" do %>
  <div class="flex flex-wrap gap-3">
    <%= link_to tracks_path, 
        class: "px-4 py-2 rounded-full text-sm font-medium transition-colors #{params[:tag].blank? ? 'bg-primary text-white' : 'bg-neutral-900 hover:bg-neutral-800'}",
        data: { turbo_frame: "tracks_filter" } do %>
      All
    <% end %>
    <% @popular_tags.each do |tag| %>
      <%= link_to tracks_path(tag: tag.tag), 
          class: "px-4 py-2 rounded-full text-sm font-medium transition-colors #{params[:tag] == tag.tag ? 'bg-primary text-white' : 'bg-neutral-900 hover:bg-neutral-800'}",
          data: { turbo_frame: "tracks_filter" } do %>
        <%= tag.tag %>
      <% end %>
    <% end %>
  </div>

  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mt-8">
    <% @tracks.each do |track| %>
      <%= render "tracks/track_cell", track: track %>
    <% end %>
  </div>
<% end %>
