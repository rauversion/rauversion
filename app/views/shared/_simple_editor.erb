<div class="flex flex-col border border-default rounded-md bg-muted" 
  data-controller="simple-editor">
  <div class="px-2 py-2 flex items-center justify-between bg-default">
    <div class="flex space-x-2 items-center">

      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-editor-toolbar data-level="1" data-action="simple-editor#toggleHeading">
        <span class="">H1</span>
      </button>
    
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-level="2" data-action="simple-editor#toggleHeading">
        <span class="">H2</span>
      </button>

      <!-- list -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="simple-editor#toggleBulletList">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3" y1="6" y2="6"/><line x1="3" x2="3" y1="12" y2="12"/><line x1="3" x2="3" y1="18" y2="18"/></svg>
      </button>

      <!-- ordered -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="simple-editor#toggleOrderedList">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="10" y1="6" x2="21" y2="6"></line>
          <line x1="10" y1="12" x2="21" y2="12"></line>
          <line x1="10" y1="18" x2="21" y2="18"></line>
          <path d="M4 6h1v4"></path>
          <path d="M4 10h2"></path>
          <path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1"></path>
        </svg>
      </button>

      <!-- B -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="simple-editor#toggleBold">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
          <path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>
        </svg>
      </button>

      <!-- italic -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="simple-editor#toggleItalic">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="19" y1="4" x2="10" y2="4"></line>
          <line x1="14" y1="20" x2="5" y2="20"></line>
          <line x1="15" y1="4" x2="9" y2="20"></line>
        </svg>
      </button>

      <!-- link -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2" type="button" data-action="simple-editor#openLinkPrompt">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
          <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </button>
     
      <div data-simple-editor-target="linkWrapper" class="hidden flex items-center">
        <input data-simple-editor-target="linkField" data-action="keydown.enter->simple-editor#setLink" type="text">
        <button class="btn btn-xs text-xs font-bold outlined bg-default rounded-lg p-2" type="button" data-action="click->simple-editor#setLink">link</button>
      </div>

      <!-- AI Enhancement -->
      <button class="btn btn-xs text-xs font-bold border border-subtle outlined bg-default rounded-lg p-2 text-purple-800" 
              type="button" 
              data-action="simple-editor#openAiPrompt"
              data-simple-editor-target="enhanceButton">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
      </button>

      <!-- AI Prompt Modal -->
      <div data-simple-editor-target="aiPromptWrapper" class="hidden fixed inset-0 bg-white bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-default">
          <div class="mt-3">
            <h3 class="text-lg leading-6 font-medium text-default">Enhance Text</h3>
            <div class="mt-2">
              <textarea
                data-simple-editor-target="aiPromptInput"
                class="mt-1 block w-full rounded-md border-muted shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                rows="3"
                placeholder="Enter your prompt to enhance the text..."></textarea>
            </div>
            <div class="mt-4 flex justify-end space-x-3">
              <button
                type="button"
                data-action="simple-editor#closeAiPrompt"
                class="inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                Cancel
              </button>
              <button
                type="button"
                data-action="simple-editor#enhanceWithAI"
                class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                Enhance
              </button>
            </div>
          </div>
        </div>
      </div>
    
    </div>

    <% if local_assigns[:variables].present? %>
      <%= render Dropdown::Component.new( label: "Add Variables",
                          variant: @variant,
                          size: "md",
                          orientation: "right",
                          origin: @origin,
                          #button: @button,
                          #btn_classes: @btn_classes
                        ) do %>
        <div class="pt-4 pb-1 w-128 ">
          <div class="mb-2 px-4 text-left text-xs text-gray-500">
            ADD DYNAMIC TEXT VARIABLES
          </div>
          <% local_assigns[:variables].each do |k, v| %>
            <div role="menuitem" class="focus:ring-brand-800 text-sm text-gray-700 ring-inset first-of-type:rounded-t-[inherit] last-of-type:rounded-b-[inherit] hover:bg-gray-100 hover:text-default focus:outline-none focus:ring-1 hover:ring-0" tabindex="-1" data-orientation="vertical" data-radix-collection-item="">
              <button type="button" 
                data-value=" {<%= k %>} "
                data-action="click->simple-editor#insert" 
                class="w-full px-4 py-2">
                <div class="sm:grid sm:grid-cols-2">
                  <div class="mr-3 text-left md:col-span-1">{<%= k %>}</div>
                  <div class="hidden text-left text-muted sm:col-span-1 sm:flex"><%= v %></div>
                </div>
              </button>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div data-simple-editor-target="editor" 
    class="px-4 border-t border-emphasis text-emphasis 
    rounded-sm bg-mute prose prose-sm <%= local_assigns[:height] || "h-36" %> overflow-auto" 
    style="max-width: none;">
  </div>

  <%= form.hidden_field field, 
    "data-simple-editor-target": "textInput"
  %>

</div>